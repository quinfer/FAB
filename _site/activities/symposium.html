<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Barry Quinn">
<meta name="author" content="Fearghal Kearney">

<title>FAB - FAB Symposium 2023</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//img/QUB_QBS_Logo_Red_Landscape.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../mycssblend.css">
<link rel="stylesheet" href="../mycss.css">
<meta property="og:title" content="FAB - FAB Symposium 2023">
<meta property="og:description" content="AI and the Future of Financial Regulation">
<meta property="og:image" content="https://q-rap.connect.qub.ac.uk/FAB/img/ATA_0414.jpg">
<meta property="og:site-name" content="FAB">
<meta property="og:locale" content="es_ES">
<meta name="twitter:title" content="FAB - FAB Symposium 2023">
<meta name="twitter:description" content="AI and the Future of Financial Regulation">
<meta name="twitter:image" content="https://q-rap.connect.qub.ac.uk/FAB/img/ATA_0414.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">FAB</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-people" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">People</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-people">    
        <li>
    <a class="dropdown-item" href="../people.html" rel="" target="">
 <span class="dropdown-text">People</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../activity.html" rel="" target="">
 <span class="menu-text">Activities</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-the-practical-intellectualist" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">The Practical Intellectualist</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-the-practical-intellectualist">    
        <li>
    <a class="dropdown-item" href="../pracademic.html" rel="" target="">
 <span class="dropdown-text">About</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../blog.html" rel="" target="">
 <span class="dropdown-text">Pracdemic Blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../eduAIseries.html" rel="" target="">
 <span class="dropdown-text">AI and the Future of Education Series</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../pubs.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#financial-conduct-authority-fca-keynote" id="toc-financial-conduct-authority-fca-keynote" class="nav-link active" data-scroll-target="#financial-conduct-authority-fca-keynote">Financial Conduct Authority (FCA) Keynote</a></li>
  <li><a href="#academic-presentation" id="toc-academic-presentation" class="nav-link" data-scroll-target="#academic-presentation">Academic Presentation</a></li>
  <li><a href="#panel-discussion-on-ai-in-financial-services-opportunities-risks" id="toc-panel-discussion-on-ai-in-financial-services-opportunities-risks" class="nav-link" data-scroll-target="#panel-discussion-on-ai-in-financial-services-opportunities-risks">Panel discussion on AI in financial services: Opportunities &amp; Risks</a></li>
  <li><a href="#event-slideshow" id="toc-event-slideshow" class="nav-link" data-scroll-target="#event-slideshow">Event Slideshow</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">FAB Symposium 2023</h1>
<p class="subtitle lead">AI and the Future of Financial Regulation</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Barry Quinn </p>
             <p>Fearghal Kearney </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../img/ATA_0702.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">From right to left: Barry Quinn (QBS), Chris Clements (FinTrU), Adrian Johnston (Catalyst Inc), Pavle Avramovic (FCA),Carla McGlynn (Citi), Fearghal Kearney (QBS), Daniel Broby (UU)</figcaption>
</figure>
</div>
<p>From right to left: Barry Quinn (QBS), Chris Clements (FinTrU), Adrian Johnston (Catalyst Inc), Pavle Avramovic (FCA), Carla McGlynn (Citi), Fearghal Kearney(QBS), Daniel Broby (UU)</p>
<p>It marked the first outing for our lab, wrapping up six months of hard graft and preparation. The vibe of the afternoon? Smart-casual to a tee. Insightful talks from keynote speakers and academics bringing the ‘smart’, all set against the backdrop of our laid-back organisers (Fearghal and Barry) adding a good dollop of ‘casual’.</p>
<p>We drew in a diverse crowd, from the big names in FinTech like Citi Belfast, Kainos, and Davy’s Wealth Managers, to the sharp minds at Cardinal Analytics, FD Technologies, and FinTrU. Not to mention the folks from PWC, College Green Ventures, Resourceful Planner, and the legal eagles at Baker McKenzie and AI Goodbody. And of course, our supporters from InvestNI, Belfast Chamber of Trade and Commerce, and the Software Alliance.</p>
<p>We tackled the hot topic of AI and financial regulation from every angle - the regulators, the academics, and the industry practitioners. It was an enjoyable afternoon and a fantastic way to set the ball rolling for our wee lab.</p>
<p>What a great afternoon we had on the 23rd of November at Riddel Hall, where we officially launched our wee Finance AI Research Lab with our first symposium!</p>
<section id="financial-conduct-authority-fca-keynote" class="level2">
<h2 class="anchored" data-anchor-id="financial-conduct-authority-fca-keynote">Financial Conduct Authority (FCA) Keynote</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/ATA_0580.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Pavle Avramovic (Manager of Emerging Tech and Research in Innovation Department of the FCA)</figcaption>
</figure>
</div>
<p>So, let’s dive into the “Emerging Technologies &amp; Regulation” keynote, a real brain-teaser that digs into the tricky dance between cutting-edge tech and keeping things above board with regulators. First off, it throws a spotlight on how key it is for regulatory bodies, like the big players at the Financial Conduct Authority (FCA), to understand new tech. The FCA’s Innovation department is right at the heart of this, juggling the task of getting these newfangled technologies to play nice with the rules.</p>
<p>Now, getting into the weeds, the presentation takes a deep dive into synthetic data and Privacy Enhancing Technologies (PETs) – emerging solutions to some <a href="https://q-rap.connect.qub.ac.uk/detection/detection.html#/fab">wicked problems</a> in the finance world. These are the secret sauce for keeping our data safe and sound, a issues that is front and centre as the FCA grapple with <a href="https://www.fca.org.uk/publication/feedback/fs23-4.pdf">Big Tech as the gatekeepers of our financial data</a>. The FCA isn’t just sitting on its hands either; they’ve got this Horizon Scanning Framework, a nifty tool for keeping an eye out on how tech trends could shake up the financial scene for businesses and us regular folks.</p>
<p>But wait, the weeds get more complex. We get into the nitty-gritty of some real mind-bending tech like Quantum Computing and Decentralized Finance (DeFi). The talk’s all about figuring out how these innovations could stir the pot and the headaches they might cause for the rule books. The FCA isn’t just watching from the sidelines - they’re right in there, working with all sorts to make sure innovation gets a green light while still keeping things square for us and the market.</p>
<p>Plus, the presentation doesn’t just stop at the now; it takes a peek into what’s coming. It lays out the FCA’s game plan for rolling these tech wonders into their rule-making playbook. It’s all about teaming up and staying nimble, making sure the rules can keep up with the tech without putting the brakes on new ideas. <strong>At FAB, we are excited about the follow-on action points in this space.</strong></p>
<p>In a nutshell, this talk gives you the whole picture of how tech, money, and rules are doing this intricate tango, highlighting why we need to stay sharp ,and research in collaboration with regulators and businesses, to keep things moving in the right direction.</p>
<p>Full slide deck can be found <a href="presenter_slides/Emerging Technologies &amp; Regulation - Queens University.pptx">here</a></p>
</section>
<section id="academic-presentation" class="level2">
<h2 class="anchored" data-anchor-id="academic-presentation">Academic Presentation</h2>
<p><img src="img/ATA_0460.jpg" class="img-fluid" alt="Professor Hui Wang (from QUB EEECS School)"> Alright, let’s switch gears to Professor Wang’s presentation on “AI and Compliance Audit”. As a professor of AI, Hui dives deep into the techy side of using AI in making sure everyone’s playing by the rules in auditing. We’re talking about some technologies that AI brings to this wicked problem.</p>
<p>First up, there’s advances in Natural Language Processing (NLP). This isn’t your everyday chattty AI; it’s like giving a super-brain the ability to chew through complex legal jargon and regulations. A machine that can potentially make sense of all that legal “rules on the book” using logic-based algorithms.</p>
<p>Then, comes the machine learning algorithms,the kind that can spot the odd one out in heaps of data. These clever algorithms are like detectives, sniffing out anything fishy that might point to someone bending the rules.</p>
<p>And don’t forget about Computer Vision. This isn’t just about giving computers eyes; it’s about teaching them to be eagle-eyed when it comes to scanning documents and images. They’re making sure every ‘i’ is dotted and every ‘t’ is crossed for compliance.</p>
<p>But,it’s not all about the gushy AI hype. The presentation doesn’t shy away from the tough bits, like making sure the data’s up to scratch and keeping the AI’s decision-making clear as day. Plus, there’s the big question of ethics – how do we use AI without stepping on privacy toes or shaking up jobs in the auditing world?</p>
<p>In short, Professor Wang’s talk is a deep dive into the cool, complex world of AI in compliance auditing, blending the high-tech with the high-stakes of keeping things on the straight and narrow.</p>
<p>Full slide deck can be found <a href="presenter_slides/AI+ComplianceAudit[16].pptx">here</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/ATA_0482.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Professor Daniel Broby (Ulster Business School)</figcaption>
</figure>
</div>
<p>Daniel’s presentation tackled the topic of “Financial Auditing of Distributed Ledgers, Blockchain, and Cryptocurrencies”. This one’s a real eye-opener, diving into the twisty world of auditing in the age of blockchain and crypto.</p>
<p>Daniel kicks off with transaction malleability in the blockchain. It sounds like a mouthful, but think of it as the art of making sure each transaction is what it claims to be, even when the blockchain’s being a bit slippery.</p>
<p>Next, he moves onto the Wild West of Digital Autonomous Organizations (DAOs). Auditing these bad boys is like trying to herd cats (or academics!), with their decentralised, headless nature throwing up all sorts of challenges.</p>
<p>Then there’s the melodrama of blockchain forks. Imagine auditing a road that suddenly splits in two – which path do you take? Daniel discusses the auditors’ headaches when the blockchain decides to go this way and that.</p>
<p>Auditors in blockchain custody is another hot topic. In this new world, auditors are like the blockchain’s guardians, making sure everything’s above board and secure. Cross-chain transactions are wicked problem in this space. It’s like auditing a deal that happens across multiple countries, each with its own rules. How do you even start to keep track of all that? Do the theories of international finance help here?</p>
<p>Daniel doesn’t stop there. He dives into the nitty-gritty of time-locked and multi-signature transactions, like those puzzles where you need two keys to open a treasure chest. And let’s not forget the rollercoaster ride that is cryptocurrency volatility. This stuff makes auditing a whole new ball game.</p>
<p>Daniel’s talk is a deep dive into the new frontier of financial auditing. It’s a world where everything’s digital, decentralised, and a bit unpredictable, highlighting just how much auditors need to up their game to keep up with these techy trends.</p>
<p>The full slide deck can be found <a href="presenter_slides/AI LAb.pdf">here</a></p>
<!-- ![Dr Barry Quinn (Co-Director of Finance and AI research Lab at Queen's Business School)](img/ATA_0478.jpg) -->
</section>
<section id="panel-discussion-on-ai-in-financial-services-opportunities-risks" class="level2">
<h2 class="anchored" data-anchor-id="panel-discussion-on-ai-in-financial-services-opportunities-risks">Panel discussion on AI in financial services: Opportunities &amp; Risks</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/ATA_0570.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Panelists from left to right: Fearghal Kearney (QBS), Pavle Armanovic (FCA), Chris Clements (FinTrU), Adrian Johnston (Catalyst Inc), Carla McGlynn (Citi Belfast)</figcaption>
</figure>
</div>
<p>And for the grand finale of the event, we had a cracking 45-minute panel discussion. Picture this: some of the brightest sparks from Northern Ireland’s buzzing private sector, all gathered to share their two cents. We had the big brains like Pavle Avramovic, who’s into Emerging Tech &amp; Research at the FCA; Chris Clements, the whiz behind Product Development at FinTrU; Dr Adrian Johnston MBE, the strategic mastermind at Catalyst; and Carla McGlynn, the guru of Data, Business Risks, and Controls Technology at Citi Belfast. Leading this dream team was Dr Fearghal Kearney, and he wasn’t messing about – he hit them with two big questions:</p>
<ol type="1">
<li>What’s the score with AI in Financial Services? What golden opportunities can Northern Ireland grab with both hands?</li>
<li>And the flip side – what are the big risks and headaches of mixing AI into Financial Services?</li>
</ol>
<p>The debate that kicked off was nothing short of lively. Adrian chipped in with his take on the top-notch research and innovation collabs already happening in Northern Ireland, not to mention some exciting prospects brewing up in the North West. When it came to the nitty-gritty of risks and challenges, Chris was on point, stressing how we’ve got to stop working in our own little bubbles. And Dr Kearney, the chair, had a cracker of a point – it’s high time for Data Scientists to stop lurking in the corner of the playground.</p>
<p>Carla dropped a gem too, reminding everyone that sometimes what we need from AI can be pretty straightforward, like getting those never-ending documents summed up for the busy bees at the top. All in all, it was a top-shelf discussion that really got the cogs turning on how Northern Ireland can play its cards right with AI in the financial game.</p>
<!-- Some common themes emerged from the subsequent discussions. -->
<!-- ![](img/ATA_0584.jpg){width="30%" vertical-align:"middle"} Pavle kicked off with thoughts on how Northern Ireland has an important role to play to develop and innovate with regulatory technologies. He suggested that the "bug" of brexit is actually an innovation "feature" when it comes to AI sandbox environment for regulatory access into both the UK and the EU. Pavle highlighted how the FCA collaborate across bodies and borders, the former via the [Digital Regulation Cooperation Forum](https://www.drcf.org.uk/about-us) and the latter via the [International Organization of Securities Commissions](https://www.iosco.org).  -->
<!-- ![](img/ATA_0589.jpg){width="30%" vertical-align:"middle"} Chris Clements, Director of Product Development for [FinTrU](https://www.fintru.com), argues that AI can join up disparate businesses process in fintechs. He spoke of the traditional approach where Data scientists are siloed from product engineers and regulatory domain experts and explains how AI can be used to "tool up" bridges to developed and end-to-end product lifecycle.   -->
<!-- ![](img/ATA_0604.jpg){width="30%" vertical-align:"middle"} Adrian Johnston MBE, Director of Strategic Partnership for [Catalyst](https://wearecatalyst.org), with his strategic cap on described some exciting developments in the North West. There are exciting plans to develop a "supercluster" for regulatory technology, allowing experience from regulatory challenges in one sector to inform research and development in others.  Adrian explains who Northern Ireland continues to punch above their weight in private sector technological innovation despite political instability.  He also highlights are unique positioning as a potential R&D laboratory for multiple regulatory landscape simulations.  -->
<!-- ![](img/ATA_0622.jpg){width="30%" vertical-align:"middle"} Finally, Carla McGlynn, Director, Head of Markets Data, Business Risks and Controls Technology / Site Lead at Citi Belfast, provides the fintech consumer viewpoint and discussed how Citi are sifting through the Generative AI hype. In Citi they are thinking about micro productivity wins in their business risk and controls analytics, and markets data curation. -->
<!-- In terms of risks, the labour displacement issues was important for all the panel members. -->
</section>
<section id="event-slideshow" class="level2">
<h2 class="anchored" data-anchor-id="event-slideshow">Event Slideshow</h2>
<!-- Swiper -->
<div class="swiper mySwiper">
  <div class="swiper-wrapper">
    <div class="swiper-slide">
    <img src="img/ATA_0414.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0460.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0469.jpg">
    </div>
      <div class="swiper-slide">
    <img src="img/ATA_0475.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0478.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0482.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0536.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0570.jpg">
    </div>
     <div class="swiper-slide">
    <img src="img/ATA_0580.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0584.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0589.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0592.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0598.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0604.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0609.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0622.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0643.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0687.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0702.jpg">
    </div>
    <div class="swiper-slide">
    <img src="img/ATA_0723.jpg">
    </div>
 </div>
 <!-- Add Pagination -->
 <div class="swiper-pagination"></div>
 <!-- Add Navigation -->
 <div class="swiper-button-next"></div>
 <div class="swiper-button-prev"></div>
 <!-- Add Scrollbar -->
 <div class="swiper-scrollbar"></div>

<script>
  var swiper = new Swiper('.mySwiper', {
    // Optional parameters
    direction: 'horizontal',
    loop: true,

    // If you want to use navigation, pagination, or scrollbar
    pagination: {
      el: '.swiper-pagination',
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    scrollbar: {
      el: '.swiper-scrollbar',
    },
  });
</script>


</div></section>

<p><img src="../img/QUB_QBS_Logo_Red_Landscape.png" class="img-fluid" style="width:50.0%"></p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>